# 新一代BMS播放器：Nebula Tunes（暂定）

## 设计目标

- 让新人能够轻松拥有完整的BMS体验
- 让BMS资源的获取和分享更加便利
- 稳定，流畅

## 计划特性

### 1、BMS资源读取/管理

#### 本地

1. 支持读取压缩包内的谱面文件。提供对 `zip` `7z` `rar` 格式的支持。
2. 对于追加差分的情况：
   - 假设压缩包名字为`foo.zip`，则在压缩包所在目录创建一个名为`foo`的文件夹，用于存放差分文件。

- 其它：
1. 计划支持 `bms` `bme` `bml` `pms` `bmson` 格式。

#### 远程

1. 支持从 `bms.wrigglebug.xyz` 等网站，按照md5值查询并下载作品。
2. 支持从 直链 / Stella Uploader 等地点下载差分，下载完成后：
   - 在歌曲数据库中查找类似谱面，对比Wav/Bmp定义以确定是否为同作品谱面，如果是则自动添加该差分。
3. （待定）设立一个Tracker服务器，同样支持md5查询。目标是支持用户间互传作品。

### 2、分数系统

1. 采用`Lunatic Raves 2`的血条和判定系统，但会避免“Bad中毒”等影响正常游戏体验的问题。
2. 应用`LR2oraja`的`AE-CLEAR`和`EXHARD`血条，以及`CN`、`HCN`的判定/回血机制。

#### Internet Ranking

1. 默认按照 `通关状态（点灯）` -> `分数` 进行排序（点灯优先）。
2. 默认只记录`LN`/`#LNMODE`模式下的成绩，避免因长条模式造成的排行榜分裂。

### 3、界面

1. （待定）使用beatoraja的皮肤系统。
2. （待定）开发基于JavaScript皮肤模块？
3. （待定）用于管理文件夹/难度表等配置的节目设置，使用Layer界面？

### END、要求

- 尽量保证运行稳定性，其次是帧率。（是否需要避免使用带垃圾回收的语言？）

### END、扩展

（待定）使用WASM模块扩展功能。

可以扩展的部分包括：
- Internet Ranking提供者。
- （待定）其他功能。